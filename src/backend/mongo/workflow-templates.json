[
  {
    "name": "compute-distance-matrix",
    "description": "Compute Distance Matrix Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "function": {
        "type": "string",
        "allowed-values": [
          "hamming",
          "grapetree",
          "kimura"
        ]
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=typing-data --workflow-id=${workflowId} --out=/phyloviz-web-platform/typing_dataset.txt"
        },
        "children": [
          "distanceCalculation"
        ]
      },
      {
        "taskId": "distanceCalculation",
        "tool": "phylolib",
        "action": {
          "command": "distance ${function} --dataset=ml:/phyloviz-web-platform/typing_dataset.txt --out=symmetric:/phyloviz-web-platform/distance_matrix.txt"
        },
        "children": [
          "upload"
        ]
      },
      {
        "taskId": "upload",
        "tool": "uploader",
        "action": {
          "command": " --file-path=/phyloviz-web-platform/distance_matrix.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId} --resource-type=distance-matrix --source-type=function --function=${function}"
        }
      }
    ]
  },
  {
    "name": "compute-tree",
    "description": "Compute Tree Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "distanceMatrixId": {
        "type": "distanceMatrixId"
      },
      "algorithm": {
        "type": "string",
        "allowed-values": [
          "goeburst",
          "edmonds",
          "sl",
          "cl",
          "upgma",
          "upgmc",
          "wpgma",
          "wpgmc",
          "saitounei",
          "studierkepler",
          "unj"
        ]
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-id=${distanceMatrixId} --resource-type=distance-matrix  --workflow-id=${workflowId} --out=/phyloviz-web-platform/distance_matrix.txt"
        },
        "children": [
          "treeCalculation"
        ]
      },
      {
        "taskId": "treeCalculation",
        "tool": "phylolib",
        "action": {
          "command": "algorithm ${algorithm} --matrix=symmetric:/phyloviz-web-platform/distance_matrix.txt --out=newick:/phyloviz-web-platform/tree.txt"
        },
        "children": [
          "upload"
        ]
      },
      {
        "taskId": "upload",
        "tool": "uploader",
        "action": {
          "command": " --file-path=/phyloviz-web-platform/tree.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId} --resource-type=tree --source-type=algorithm-distance-matrix --algorithm=${algorithm} --distance-matrix-id=${distanceMatrixId} --parameters={}"
        }
      }
    ]
  },
  {
    "name": "compute-tree-without-distance-matrix",
    "description": "Compute Tree Without Distance Matrix Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "function": {
        "type": "string",
        "allowed-values": [
          "hamming",
          "grapetree",
          "kimura"
        ]
      },
      "algorithm": {
        "type": "string",
        "allowed-values": [
          "goeburst",
          "edmonds",
          "sl",
          "cl",
          "upgma",
          "upgmc",
          "wpgma",
          "wpgmc",
          "saitounei",
          "studierkepler",
          "unj"
        ]
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=typing-data --workflow-id=${workflowId} --out=/phyloviz-web-platform/typing_dataset.txt"
        },
        "children": [
          "treeCalculation"
        ]
      },
      {
        "taskId": "treeCalculation",
        "tool": "phylolib",
        "action": {
          "command": "algorithm ${algorithm} --out=newick:/phyloviz-web-platform/tree.txt : distance ${function} --dataset=ml:/phyloviz-web-platform/typing_dataset.txt"
        },
        "children": [
          "upload"
        ]
      },
      {
        "taskId": "upload",
        "tool": "uploader",
        "action": {
          "command": " --file-path=/phyloviz-web-platform/tree.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId} --resource-type=tree --source-type=algorithm-typing-data --algorithm=${algorithm} --parameters={}"
        }
      }
    ]
  },
  {
    "name": "compute-distance-matrix-and-tree",
    "description": "Compute Distance Matrix and Tree Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "function": {
        "type": "string",
        "allowed-values": [
          "hamming",
          "grapetree",
          "kimura"
        ]
      },
      "algorithm": {
        "type": "string",
        "allowed-values": [
          "goeburst",
          "edmonds",
          "sl",
          "cl",
          "upgma",
          "upgmc",
          "wpgma",
          "wpgmc",
          "saitounei",
          "studierkepler",
          "unj"
        ]
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=typing-data --workflow-id=${workflowId} --out=/phyloviz-web-platform/typing_dataset.txt"
        },
        "children": [
          "distanceCalculation"
        ]
      },
      {
        "taskId": "distanceCalculation",
        "tool": "phylolib",
        "action": {
          "command": "distance ${function} --dataset=ml:/phyloviz-web-platform/typing_dataset.txt --out=symmetric:/phyloviz-web-platform/distance_matrix.txt"
        },
        "children": [
          "upload_distance_matrix"
        ]
      },
      {
        "taskId": "upload_distance_matrix",
        "tool": "uploader",
        "action": {
          "command": " --file-path=/phyloviz-web-platform/distance_matrix.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId} --resource-type=distance-matrix --source-type=function --function=${function}"
        },
        "children": [
          "treeCalculation"
        ]
      },
      {
        "taskId": "treeCalculation",
        "tool": "phylolib",
        "action": {
          "command": "algorithm ${algorithm} --matrix=symmetric:/phyloviz-web-platform/distance_matrix.txt --out=newick:/phyloviz-web-platform/tree.txt"
        },
        "children": [
          "upload_tree"
        ]
      },
      {
        "taskId": "upload_tree",
        "tool": "uploader",
        "action": {
          "command": " --file-path=/phyloviz-web-platform/tree.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId} --resource-type=tree --source-type=algorithm-distance-matrix --algorithm=${algorithm} --parameters={}"
        }
      }
    ]
  },
  {
    "name": "compute-tree-and-index",
    "description": "Compute Tree And Index Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "distanceMatrixId": {
        "type": "distanceMatrixId"
      },
      "algorithm": {
        "type": "string",
        "allowed-values": [
          "goeburst",
          "edmonds",
          "sl",
          "cl",
          "upgma",
          "upgmc",
          "wpgma",
          "wpgmc",
          "saitounei",
          "studierkepler",
          "unj"
        ]
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-id=${distanceMatrixId} --resource-type=distance-matrix  --workflow-id=${workflowId} --out=/phyloviz-web-platform/distance_matrix.txt"
        },
        "children": [
          "treeCalculation"
        ]
      },
      {
        "taskId": "treeCalculation",
        "tool": "phylolib",
        "action": {
          "command": "algorithm ${algorithm} --matrix=symmetric:/phyloviz-web-platform/distance_matrix.txt --out=newick:/phyloviz-web-platform/tree.txt"
        },
        "children": [
          "upload"
        ]
      },
      {
        "taskId": "upload",
        "tool": "uploader",
        "action": {
          "command": " --file-path=/phyloviz-web-platform/tree.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId} --resource-type=tree --source-type=algorithm-distance-matrix --algorithm=${algorithm} --distance-matrix-id=${distanceMatrixId} --parameters={}"
        },
        "children": [
          "treeIndexing"
        ]
      },
      {
        "taskId": "treeIndexing",
        "tool": "tree_indexer",
        "action": {
          "command": "--tree-file-path=/phyloviz-web-platform/tree.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId}"
        }
      }
    ]
  },
  {
    "name": "index-typing-data",
    "description": "Index Typing Data Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=typing-data  --workflow-id=${workflowId} --out=/phyloviz-web-platform/typing_dataset.txt"
        },
        "children": [
          "typingDataIndexing"
        ]
      },
      {
        "taskId": "typingDataIndexing",
        "tool": "typing_data_indexer",
        "action": {
          "command": "--typing-data-file-path=/phyloviz-web-platform/typing_dataset.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId}"
        }
      }
    ]
  },
  {
    "name": "index-isolate-data",
    "description": "Index Isolate Data Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=isolate-data --workflow-id=${workflowId} --out=/phyloviz-web-platform/isolate_data.txt"
        },
        "children": [
          "isolateDataIndexing"
        ]
      },
      {
        "taskId": "isolateDataIndexing",
        "tool": "isolate_data_indexer",
        "action": {
          "command": "--isolate-data-file-path=/phyloviz-web-platform/isolate_data.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId}"
        }
      }
    ]
  },
  {
    "name": "index-typing-and-isolate-data",
    "description": "Index Typing and Isolate Data Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      }
    },
    "tasks": [
      {
        "taskId": "downloadTyping",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=typing-data  --workflow-id=${workflowId} --out=/phyloviz-web-platform/typing_dataset.txt"
        },
        "children": [
          "typingDataIndexing"
        ]
      },
      {
        "taskId": "typingDataIndexing",
        "tool": "typing_data_indexer",
        "action": {
          "command": "--typing-data-file-path=/phyloviz-web-platform/typing_dataset.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId}"
        },
        "children": [
          "downloadIsolate"
        ]
      },
      {
        "taskId": "downloadIsolate",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-type=isolate-data --workflow-id=${workflowId} --out=/phyloviz-web-platform/isolate_data.txt"
        },
        "children": [
          "isolateDataIndexing"
        ]
      },
      {
        "taskId": "isolateDataIndexing",
        "tool": "isolate_data_indexer",
        "action": {
          "command": "--isolate-data-file-path=/phyloviz-web-platform/isolate_data.txt --project-id=${projectId} --dataset-id=${datasetId} --workflow-id=${workflowId}"
        }
      }
    ]
  },
  {
    "name": "index-tree",
    "description": "Index Tree Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "treeId": {
        "type": "treeId"
      }
    },
    "tasks": [
      {
        "taskId": "download",
        "tool": "downloader",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --resource-id=${treeId} --resource-type=tree --workflow-id=${workflowId} --out=/phyloviz-web-platform/tree.txt"
        },
        "children": [
          "treeIndexing"
        ]
      },
      {
        "taskId": "treeIndexing",
        "tool": "tree_indexer",
        "action": {
          "command": "--tree-file-path=/phyloviz-web-platform/tree.txt --project-id=${projectId} --dataset-id=${datasetId} --tree-id=${treeId} --workflow-id=${workflowId}"
        }
      }
    ]
  },
  {
    "name": "compute-tree-view",
    "description": "Compute Tree View Workflow",
    "arguments": {
      "datasetId": {
        "type": "datasetId"
      },
      "treeId": {
        "type": "treeId"
      },
      "layout": {
        "type": "string",
        "allowed-values": [
          "force-directed",
          "radial"
        ]
      }
    },
    "tasks": [
      {
        "taskId": "treeViewCompute",
        "tool": "compute_tree_view",
        "action": {
          "command": "--project-id=${projectId} --dataset-id=${datasetId} --tree-id=${treeId} --workflow-id=${workflowId} --layout=${layout}"
        }
      }
    ]
  }
]